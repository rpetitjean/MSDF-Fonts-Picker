<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>

    <title>MSDF Font List</title>

    <script>
        const fontsFolder = 'https://rpetitjean.github.io/MSDF-Fonts-Picker/Fonts/';
        const fontsJsonPath = `${fontsFolder}fonts.json`;

        async function loadFonts() {
            try {
                console.log(`Fetching fonts.json from: ${fontsJsonPath}`);
                const response = await fetch(fontsJsonPath);

                console.log(`Response status: ${response.status}`);
                if (!response.ok) {
                    throw new Error(`Failed to fetch fonts.json: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();
                console.log('Fonts loaded:', data);

                const fontList = document.getElementById('fontList');
                data.fonts.forEach(font => {
                    const listItem = document.createElement('li');
                    listItem.textContent = font;
                    listItem.dataset.link = `${fontsFolder}${font}`;
                    listItem.addEventListener('click', () => copyToClipboard(listItem.dataset.link));
                    fontList.appendChild(listItem);
                });
            } catch (error) {
                console.error('Error loading fonts:', error);
                document.getElementById('fontList').innerHTML = '<li>Error loading fonts</li>';
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const copiedMessage = document.getElementById('copiedMessage');
                copiedMessage.style.display = 'block';
                setTimeout(() => copiedMessage.style.display = 'none', 2000);
            }).catch(err => {
                console.error('Failed to copy to clipboard:', err);
            });
        }

        // Load fonts on page load
        window.onload = loadFonts;
    </script>

<script>
    // Define the sentence to display
const sentence = "Plonger au fond du gouffre, Enfer ou Ciel, qu’importe ?\nAu fond de l’Inconnu pour trouver du nouveau !";

// Base path for font files
const fontsFolder = 'https://rpetitjean.github.io/MSDF-Fonts-Picker/Fonts/';

// Initialize Three.js scene, camera, and renderer
const viewer = document.getElementById('viewer');
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(45, viewer.offsetWidth / viewer.offsetHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer();
renderer.setSize(viewer.offsetWidth, viewer.offsetHeight);
viewer.appendChild(renderer.domElement);

// Set up lighting
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(1, 1, 1).normalize();
scene.add(light);

// Helper function to load and render the selected font
function loadAndRenderFont(fontUrl) {
    const loader = new THREE.FontLoader();
    loader.load(fontUrl, font => {
        // Clear existing objects in the scene
        while (scene.children.length > 1) scene.remove(scene.children[1]);

        // Create text geometry
        const textGeometry = new THREE.TextGeometry(sentence, {
            font: font,
            size: 1,
            height: 0.2,
            curveSegments: 12,
            bevelEnabled: true,
            bevelThickness: 0.03,
            bevelSize: 0.02
        });

        // Create text material
        const textMaterial = new THREE.MeshPhongMaterial({ color: 0x00aaff });
        const textMesh = new THREE.Mesh(textGeometry, textMaterial);

        // Position and add text to the scene
        textMesh.position.set(-10, 0, -30);
        scene.add(textMesh);
    });
}

// Add interactivity to the font list
document.getElementById('fontList').addEventListener('click', event => {
    if (event.target.tagName === 'LI') {
        const fontUrl = event.target.dataset.link;
        console.log(`Loading font: ${fontUrl}`);
        loadAndRenderFont(fontUrl);
    }
});

// Animation loop
function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
}
animate();

</script>

    <style>
        body { font-family: Arial, sans-serif; background-color: #000; color: #ff007f; text-align: center; padding: 20px; }
        h1 { color: #44ff7f; }
        ul { list-style: none; padding: 0; }
        li { cursor: pointer; color: #00ff7f; margin: 10px; }
        li:hover { color: #ff007f; }
        .copied-message { display: none; color: #00ff7f; }
    </style>
</head>
<body>
    <h1>Font List</h1>
    <div id="viewer" style="width: 800px; height: 400px; margin: 20px auto; border: 1px solid #ccc;"></div>

    <p>Click a font to copy its link:</p>
    <ul id="fontList"></ul>
    
    <div id="copiedMessage" class="copied-message">Link copied!</div>
</body>
</html>
